<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.6.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Wilson E. Marcílio Júnior">

  
  
  
    
  
  <meta name="description" content="PhD candidate in Visualization">

  
  <link rel="alternate" hreflang="en-us" href="/courses/">

  


  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  <link rel="alternate" href="/courses/index.xml" type="application/rss+xml" title="Wilson E Marcilio Jr">
  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/courses/">

  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="Wilson E Marcilio Jr">
  <meta property="og:url" content="/courses/">
  <meta property="og:title" content="Courses | Wilson E Marcilio Jr">
  <meta property="og:description" content="PhD candidate in Visualization"><meta property="og:image" content="/img/icon-192.png">
  <meta property="twitter:image" content="/img/icon-192.png"><meta property="og:locale" content="en-us">
  
    
  

  




  


  





  <title>Courses | Wilson E Marcilio Jr</title>


  <script type="text/javascript" src="js/d3.js"></script>


  <style type="text/css">
    
    div.tooltip { 
          position: absolute;     
          text-align: center;     
          width: 120px;          
          height: 120px;         
          padding: 2px;       
          font: 13px sans-serif;    
          background: #fff; 
          border: 1px; 
          border-color: 'black';       
          pointer-events: none;     
    }   

    .title {
        font-family: "Lucida Console", Courier, monospace;
        font: 14px;
        font-weight: bold;
    }

     .numbers {
        font-family: "Lucida Console", Courier, monospace;
        font: 14px;
    }


     .ticks {
        font-family: "Lucida Console", Courier, monospace;
        font: 16px;
    }

    .note {
        font-family: "Lucida Console", Courier, monospace;
        font: 8px;
    }

    svg {
        border: 1px solid #dfe7f5;
    }


  </style>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    
    
      <a class="navbar-brand" href="/">Wilson E Marcilio Jr</a>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#projects"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#featured"><span>Publications</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/courses/"><span>Teaching</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item">
        <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
      </li>
      

      

    </ul>

  </div>
</nav>

    
  
<div class="universal-wrapper pt-3">
  <h1>Monitoramento COVID-19 - São Paulo</h1>

  

  
</div>



<div class="universal-wrapper">

  <div>
    <span class="note">* As informações apresentadas são de origem pública, obtidas por meio de veículos de comunicação e da Secretaria do Estado de São Paulo.</span><br/>
      <span class="note">** Última atualização: 31/03/2020 às 8h59.</span>
  </div>
  
  <!-- <ul class="list-unstyled">
    
    
    <li>
      
    </li>
  </ul> -->

  <br/>

  <div class="mainView">
    <div>
      <svg id="map-covid">        
        <foreignobject class="node" x="700" y="5" width="300" height="100">                
            <label id="titleProgression" class="title">Dia: Hoje</label><br/>
            <input type="range" id="realProgression" name="realProgression" class="progressionRange" value="0">  
        </foreignobject>

      </svg>
    </div>

    <div>
      <svg id="statisticalCharts"></svg>
    </div>

    <div>

      <svg id="map-google">

          <foreignobject class="node" x="727" y="230" width="200" height="100">                
               <label id="progressionGoogleTrends" class="title">Dia: hoje</label><br/>
              <input type="range" id="dateGoogleTrends" name="dateGoogleTrends" class="progressionRange" value="0">
          </foreignobject>

      </svg>


    </div>
  </div>


</div>


    <script type="text/javascript">


      let tooltip = d3.select('body').append('div')
          .attr('class', 'tooltip')
          .style('opacity', 0);

      let unesps = ['Araçatuba','Araraquara','Assis','Bauru','Botucatu','Dracena','Franca','Guaratinguetá','Ilha Solteira','Itapeva','Jaboticabal','Marília','Ourinhos','Presidente Prudente','Registro','Rio Claro','Rosana','São João da Boa Vista','São José do Rio Preto','São José dos Campos','São Paulo','São Vicente','Sorocaba','Tupã'];

      for (var i = 0; i < unesps.length; i++) {
          unesps[i] = unesps[i].replace(/[^\x00-\x7F]/g, "");
      }

      let width = 900;
      let height = 750;

      let casosByCity = null;
      let googleTrendsMap = null;
      let colors = null;
      let colorTrends = null;
      let termTrends = null;
      let subsetGoogleTrendsMap = null;

      let store = {};

      let months = {
          '0': 'January',
          '1': 'February',
          '2': 'March',
          '3': 'April',
          '4': 'May',
          '5': 'June',
          '6': 'July',
          '7': 'August',
          '8': 'September',
          '9': 'October',
          '10': 'November',
          '11': 'December'
      };

      let map_month = {
          'fev': 2,
          'mar': 3,
          'abr': 4,
          'mai': 5,
          'jun': 6,
          'jul': 7,
          'ago': 8,
          'set': 9,
          'out': 10,
          'nov': 11,
          'dez': 12
      };




      loadData().then(showData);

      function drawBaseMapReal(container, countries, projection, geoJson, subset, update) {
          let backup = null;

          if( subset != null ) {
              backup = casosByCity;
              casosByCity = subset;
          } else {

              backup = casosByCity;

              casosByCity = backup.filter(d => d.date.getTime() == lastDate.getTime());
          }

          current = casosByCity;
          let max_casos = d3.max(casosByCity, d => d.casos);


          let path = d3.geoPath()
              .projection(projection);

          if( !update ) {
              container.selectAll('path')
                  .data(countries)
                  .enter().append('path')
                  .attr('d', d => { return path(d); })
                  .on('mouseover', d => {
                      tooltip.transition()
                          .duration(200)
                          .style('opacity', .9);

                      let value = 0;

                      let name = d.properties.name.replace(/[^\x00-\x7F]/g, "");

                      for (var i = 0; i < current.length; i++) {
                          let cityName = current[i]['cidade'].replace(/[^\x00-\x7F]/g, "");
                          if( cityName.trim() == name.trim() ) {
                              value = current[i]['casos'];
                              break;
                          }
                      }
                      tooltip.html("<p>"+d.properties.name+"</p>"+
                                  "<p>"+value+" caso(s) confirmados.</p>")
                          .style('left', (d3.event.pageX)+'px')
                          .style('top', (d3.event.pageY - 28)+'px');
                  })
                  .on('mouseout', d => {
                      tooltip.transition()
                          .duration(500)
                          .style('opacity', 0);
                  });


          } 

          // container.selectAll('path').remove();
          
          container.selectAll('path')
            .transition()
            .duration(update ? 1000 : 0)
              .style('stroke', '#ccc')
              .style('stroke-width', 1)
              .style('fill', d => { 
                  let value = 0;
                  if( value == 0 )
                      return '#eee';

                  return d3.interpolateReds(value/max_casos);
              });


          let scaleArea = d3.scaleLinear()
              .domain([d3.min(backup, d => +d.casos), d3.max(backup, d => +d.casos)])
              .range([5, 20]);


          let g = null;
          if( !update ) {
              g = container.append('g')
                  .attr('class', 'real_cases');     

              let g_legend = container.append('g')
                  .attr('transform', 'translate(0,0)');   

              let max = 4;
              let step = (d3.max(backup, d => +d.casos) - d3.min(backup, d => +d.casos))/max;

              for( let  i = 1; i <= max; i++ ) {

                  let r = scaleArea(i*step);

                  g_legend.append('circle')
                      .attr('cx', d => 50*i + 30)
                      .attr('cy', d => 50)
                      .attr('r', r)
                      .style('fill', '#eb4034')
                      .style('fill-opacity', 0.2)
                      .style('stroke', '#eb4034')
                      .style('stroke-opacity', 0.8);  

                  g_legend.append('text')
                      .attr('x', d => 50*i + 30)
                      .attr('y', d => 50 + scaleArea(4*step) + 20)
                      .attr('text-anchor', 'middle')
                      .attr('class', 'numbers')
                      .text(Math.floor(i*step));

              }
              g_legend.append('text')
                      .attr('x', d => 80 - scaleArea(step))
                      .attr('y', d => 20)
                      .attr('class', 'title')
                      .attr('text-anchor', 'start')
                      .text('CASOS CONFIRMADOS');


          } else {
              g = container.select('.real_cases');
          }

          
          
          let circle = g.selectAll('circle')
              .data(current, d => d.cidade);

          circle.exit().remove();

          circle.enter().append('circle')
              .attr('cx', d => projection([d.long, d.lat])[0])
              .attr('cy', d => projection([d.long, d.lat])[1])
              .style('fill', '#eb4034')
              .style('fill-opacity', 0.2)
              .style('stroke', '#eb4034')
              .style('stroke-opacity', 0.8)
            .merge(circle)
              .transition()
              .duration(500)
                .attr('r', d => scaleArea(+d.casos));
          
              
          if( backup != null ) {
              casosByCity = backup;
          }
      }

      function drawStatisticalCharts(store) {
          let geoJson = store.geoJSON;
          let evolucao = store.evolucao;

          for (var i = 0; i < evolucao.length; i++) {
              evolucao[i].evolucao = +evolucao[i].evolucao;
              evolucao[i].casos_dia = +evolucao[i].casos_dia;

              let date_string = evolucao[i].data.split('/');
              let day = +date_string[0];

              let month = map_month[date_string[1]];

              let date = new Date(2020, month-1, day);

              evolucao[i].date = date;
          }

          let legends = d3.select("#statisticalCharts")
              .attr('width', 900)
              .attr('height', 500);

          g_evolucao = legends.append('g')
              .attr('transform', 'translate(50, 50)');


          let height_graph = 300;
          let width_graph = 800;

          let yScaleEvolucao = d3.scaleLinear()
              .domain([0, d3.max(evolucao, d => d.evolucao)])
              .range([height_graph, 0]);

          let yAxisEvolucao = d3.axisLeft()
              .scale(yScaleEvolucao)
              .ticks(5);

          g_evolucao.append('g')
              .style('stroke-width', 1.5)
              .attr('class', 'ticks')
              .attr('transform', 'translate(0,'+yScaleEvolucao(d3.max(evolucao, d => d.evolucao))+')')
              .call(yAxisEvolucao);


          let xScaleEvolucao = d3.scaleTime()
              .domain([evolucao[0].date, evolucao[evolucao.length-1].date])
              .range([0, width_graph]);

          let xAxisEvolucao = d3.axisBottom()
              .scale(xScaleEvolucao);


          g_evolucao.append('g')
              .style('stroke-width', 1.5)
              .attr('class', 'tick_values')
              .attr('transform', 'translate(0,'+yScaleEvolucao(0)+')')
              .call(xAxisEvolucao)
            .selectAll("text")
              .attr("y", 0)
              .attr("x", 25)
              .attr("dy", ".35em")
              .attr('class', 'ticks')
              .style("text-anchor", "start")
              .attr("transform", "rotate(90)");

          let line_evolucao = d3.line()
              .x((d, i) => xScaleEvolucao(d.date))
              .y(d => yScaleEvolucao(d.evolucao))
              .curve(d3.curveCardinal.tension(0.5));

          g_evolucao.append('path')
              .attr('d', line_evolucao(evolucao))
              .attr('stroke', '#ff0000')
              .attr('stroke-width', 3)
              .attr('fill', 'none');

          g_evolucao.append('text')
              .attr('x', width_graph/2)
              .attr('y', -yScaleEvolucao(d3.max(evolucao, d => d.evolucao))-20)
              .attr('text-anchor', 'middle')
              .attr('class', 'title')
              .text('Casos confirmados no Estado de São Paulo');



          // draw new cases per day
          let line_novos = d3.line()
              .x((d, i) => xScaleEvolucao(d.date) )
              .y(d => yScaleEvolucao(d.casos_dia))
              .curve(d3.curveCardinal.tension(0.5));

          g_evolucao.append('path')
              .attr('d', line_novos(evolucao))
              .attr('stroke', '#000000')
              .attr('stroke-width', 3)
              .attr('fill', 'none');



          // drawing legends

          g_evolucao.append('circle')
              .attr('cx', 30)
              .attr('cy', 5)
              .attr('r', 5)
              .style('fill', '#ff0000')
              .style('stroke', 'none');


          g_evolucao.append('circle')
              .attr('cx', 30)
              .attr('cy', 25)
              .attr('r', 5)
              .style('fill', '#000000')
              .style('stroke', 'none');


          g_evolucao.append('text')
              .attr('x', 40)
              .attr('y', 10)
              .attr('class', 'numbers')
              .text('Infectados');

          g_evolucao.append('text')
              .attr('x', 40)
              .attr('y', 30)
              .attr('class', 'numbers')
              .text('Novos casos');

      }

      function drawMapReal(geoJSON) {
          let config = getMapConfig('#map-covid');
          let projection = getMapProjection(config, geoJSON);

          configMapReal = config;
          projectionMapReal = projection;
          geoJson = geoJSON;
         drawBaseMapReal(config.container, geoJSON.features, projection, geoJSON, null);
      }

      function drawMapGoogleTrends(container, countries, projection, geoJson, color, symptom) {

          let path = d3.geoPath()
              .projection(projection);

          let paths = container.selectAll('path')
            .data(countries, d => d.id);

          paths.exit().remove();

          container.selectAll('path').style('fill-opacity', 0);
          paths.enter().append('path')
              .attr('d', d => { return path(d); })
              .style('stroke', '#ccc')
              .style('stroke-width', 1)
              .style('fill-opacity', 0)
              // .transition()
              // .duration(2000)
              //     .style('fill-opacity', 0)                    
              .transition()
              .duration(1000)
                  .style('fill', color)
                  .style('fill-opacity', (d, j) => { 
                      let value = 0;

                      for( let i = 0; i < subsetGoogleTrendsMap.length; i++) {
                          if( subsetGoogleTrendsMap[i].Cidade.trim().replace(/[^\x00-\x7F]/g, "") == d.properties.name.trim().replace(/[^\x00-\x7F]/g, "") ) {
                              value = subsetGoogleTrendsMap[i][symptom];
                              break;
                          }
                      }

                      let opacity =  value == 0 ? 0 : value/d3.max(subsetGoogleTrendsMap, v => v[symptom]);

                      return opacity;
                  });
      }


      function drawGoogleTrendsLegend(container) {
          // container.select('.twitter_colorscale')
          //     .selectAll('*')
          //     .transition()
          //     .duration(2000)
          //         .style('fill-opacity', 0);

          container.append("text")
            .attr('x', width/2)
            .attr('y', 30)
            .attr('text-anchor', 'middle')
            .attr('class', 'title')
            .text('Interesse nos sistomas de COVID-19 ao longo do tempo')



          let trends_legend = container.append('g')  
              .attr('class', 'trends_legend')
              .attr('transform', 'translate(750, 50)');

          let googleTrends = googleTrendsMap.columns.slice(2, 7);

          for( let i = 0; i < googleTrends.length; i++ ) {

              trends_legend.append('circle')
                  .attr('cx', 0)
                  .attr('cy', i * 30)
                  .attr('r', 7)
                  .style('fill', colors(googleTrends[i]))
                  .on('click', d => {
                      colorTrends = colors(googleTrends[i]);
                      termTrends = googleTrends[i];

                      drawGoogleTrends(colors(googleTrends[i]), googleTrends[i]);
                  });


              trends_legend.append('text')
                  .attr('x',  12)
                  .attr('y', i * 30 + 5)
                  .text(googleTrends[i]);
          }

          // trends_legend.append('text')
          //     .attr('x', -7)
          //     .attr('y', 10)
          //     .text('Google Trends');

          trends_legend.append('rect')
              .attr('x', -20)
              .attr('y', -10)
              .attr('width', 130)
              .attr('height', 180)
              .style('stroke', 'black')
              .style('fill', 'none');
      }

      function drawGoogleTrends(color, symptom) {
          let config = getMapConfig("#map-google");
          let projection = getMapProjection(config, geoJson);

          drawMapGoogleTrends(config.container, geoJson.features, projection, geoJson, color, symptom);
      }


      function showData() {
          let distinctDates = [...new Set(casosByCity.map(d => d.data))];
          document.getElementById('realProgression').max = distinctDates.length-1;

          drawMapReal(store.geoJSON);
          drawStatisticalCharts(store);
          drawGoogleTrendsLegend(getMapConfig("#map-google").container);
          drawGoogleTrends(colors(googleTrendsMap.columns[2]), googleTrendsMap.columns[2]);
      } 

      function loadData() {
          return Promise.all([
              d3.json('geo/sp.geo.json'),
              d3.csv('data/cases-sp-cities.csv'),
              d3.csv('data/evolucao_casos.csv'),
              d3.csv('data/geoMap.csv')
          ]).then(datasets => {

              store.geoJSON = datasets[0];
              casosByCity = datasets[1];
              store.evolucao = datasets[2];
              googleTrendsMap = datasets[3];

              lastDate = new Date(2020, 0, 1);
              let temp = "";

              for( let i = 0; i < casosByCity.length; i++ ) {

                  let date_string = casosByCity[i].data.split('/');
                  let day = +date_string[0];

                  let month = map_month[date_string[1]];

                  let date = new Date(2020, month-1, day);
                  if( date > lastDate ) {
                      lastDate = date;
                  }

                  casosByCity[i].date = date;
              }

              let googleTrendsMapLastDate = new Date(2020, 0, 1);


              for( let i = 0; i < googleTrendsMap.length; ++i ) {
                    let date_string = googleTrendsMap[i].ate.split('/');
                    let day = +date_string[0];

                    let month = map_month[date_string[1]];

                    let date = new Date(2020, month-1, day);
                    if( date > googleTrendsMapLastDate ) {
                        googleTrendsMapLastDate = date;
                        temp = googleTrendsMap[i].ate;
                    }

                    googleTrendsMap[i]['tosse'] = +googleTrendsMap[i]['tosse'];
                    googleTrendsMap[i]['febre'] = +googleTrendsMap[i]['febre'];
                    googleTrendsMap[i]['tosse seca'] = +googleTrendsMap[i]['tosse seca'];
                    googleTrendsMap[i]['febre alta'] = +googleTrendsMap[i]['febre alta'];
                    googleTrendsMap[i]['falta de ar'] = +googleTrendsMap[i]['falta de ar'];
                    googleTrendsMap[i]['lat'] = +googleTrendsMap[i]['lat'];
                    googleTrendsMap[i]['long'] = +googleTrendsMap[i]['long'];

                    googleTrendsMap[i]['id'] = i;

                    googleTrendsMap[i].date = date;
                }

                colors = d3.scaleOrdinal(d3.schemeCategory10)
                  .domain(googleTrendsMap.columns.slice(2, 7));

                subsetGoogleTrendsMap = googleTrendsMap.filter(d => d.ate == temp);
                document.getElementById('progressionGoogleTrends').innerHTML = "Day: "+temp;
              

              return store;
          })
      }

      function getMapConfig(map) {
          let container = d3.select(map);

          container
              .attr('width', width)
              .attr('height', height)

          return {width, height, container};
      }

      function getMapProjection(config, geoJson) {
          let {width, height} = config;
          let projection = d3.geoMercator();

          var center = d3.geoCentroid(geoJson);
          var scale = 10;
          var offset = [width/2, height/2];
          projection = d3.geoMercator().scale(scale)
              .center(center)
              .translate(offset);

          let path = d3.geoPath()
              .projection(projection);

          var bounds = path.bounds(geoJson)
          var hscale  = scale*width  / (bounds[1][0] - bounds[0][0]);
          var vscale  = scale*height / (bounds[1][1] - bounds[0][1]);
          var scale   = (hscale < vscale) ? hscale : vscale;
          var offset  = [width - (bounds[0][0] + bounds[1][0])/2,
                          height - (bounds[0][1] + bounds[1][1])/2];

          // new projection
          projection = d3.geoMercator().center(center)
              .scale(scale).translate(offset);

          store.mapProjection = projection;

          return projection;
      }

      document.getElementById('dateGoogleTrends').addEventListener('input', function() {
          let value = this.value;

          let countDifferent = 0;
          let targetDate = googleTrendsMap[0].ate;

          for (var i = 0; i < googleTrendsMap.length; i++) {

              if( value == countDifferent ) {
                  targetDate = googleTrendsMap[i].ate;
                  break;
              }

              if( targetDate != googleTrendsMap[i].ate ) {
                  countDifferent += 1;
                  targetDate = googleTrendsMap[i].ate;
              }
          }

          subsetGoogleTrendsMap = googleTrendsMap.filter(d => d.ate == targetDate);

          drawGoogleTrends(colorTrends, termTrends);
          document.getElementById('progressionGoogleTrends').innerHTML = 'Day: '+targetDate+'.';
      });

      document.getElementById('realProgression').addEventListener('input', function() {
          let value = this.value;
          let countDifferent = 0;
          let targetDate = casosByCity[0].data;

          for (var i = 0; i < casosByCity.length; i++) {

              if( value == countDifferent ) {
                  targetDate = casosByCity[i].data;
                  break;
              }

              if( targetDate != casosByCity[i].data ) {
                  countDifferent += 1;
                  targetDate = casosByCity[i].data;
              }
          }

          let subset = casosByCity.filter(d => d.data == targetDate);
          drawBaseMapReal(configMapReal.container, geoJson.features, projectionMapReal, geoJson, subset, true);


          document.getElementById('titleProgression').innerHTML = 'Day: '+targetDate+'.';
      })
      
    </script>

      

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js" integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js"></script>
        
      

      
      
    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.96cf4c3dc37ea60dbbd03c13a455f1f7.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
